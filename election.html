
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Élection Officielle</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#f4f6f9;
    margin:0;
    padding:20px;
}

h1{
    text-align:center;
    color:#0d47a1;
}

.container{
    max-width:1100px;
    margin:auto;
}

.timer{
    text-align:center;
    font-size:20px;
    font-weight:bold;
    margin-bottom:20px;
    color:#d32f2f;
}

.form-box{
    background:white;
    padding:20px;
    border-radius:10px;
    box-shadow:0 5px 15px rgba(0,0,0,0.1);
    margin-bottom:30px;
}

input{
    width:100%;
    padding:10px;
    margin-top:10px;
    margin-bottom:15px;
}

button{
    padding:8px 15px;
    background:#0d47a1;
    color:white;
    border:none;
    border-radius:5px;
    cursor:pointer;
    margin:5px;
}

button.programme{
    background:#2e7d32;
}

button:disabled{
    background:gray;
}

.candidates{
    display:flex;
    justify-content:space-around;
    flex-wrap:wrap;
}

.card{
    background:white;
    width:260px;
    text-align:center;
    padding:20px;
    border-radius:15px;
    box-shadow:0 5px 15px rgba(0,0,0,0.1);
    margin:10px;
}

.card img{
    width:150px;
    height:150px;
    border-radius:50%;
    object-fit:cover;
}

.result{
    font-weight:bold;
    margin-top:10px;
    color:green;
}

/* MODAL */
.modal{
    display:none;
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.6);
    justify-content:center;
    align-items:center;
}

.modal-content{
    background:white;
    padding:30px;
    width:500px;
    border-radius:10px;
    max-height:80%;
    overflow:auto;
}

.close{
    float:right;
    cursor:pointer;
    font-weight:bold;
    color:red;
}
menu{
      background:linear-gradient(135deg,#6a11cb,#2575fc);
    padding:10px;
    text-align:center;
   } 
   
.menu a{
    color:rgb(13, 14, 1);
    margin:0 10px;
    text-decoration:none;
    font-weight:bold;
}
</style>
</head>

<body>
<div class="menu">
    <!-- ✅ Lien vers accueil -->
    <a href="index.html">Accueil</a>
    <a href="resultats.html">résultats</a>
    <a href="info.html">contact</a>
    <a href="election.html">Election</a>
    <a href="#">Format des photos</a>
    <a href="#">Préinscription</a>
</div>
<div class="container">

<h1>Élection Officielle</h1>

<div class="timer" id="timer"></div>

<div class="form-box">
<input type="text" id="niveau" placeholder="Entrez votre niveau">
<input type="text" id="matricule" placeholder="Entrez votre matricule">
<input type="password" id="loginPassword" placeholder="Mot de passe">
<button onclick="verifier()">Vérifier</button>
<p id="message" style="color:red;"></p>
</div>

<div class="candidates">

<div class="card">
<img src="JD3.jpg">
<h3>Candidat 1</h3>
<button onclick="voter(1)">Voter</button>
<button class="programme" onclick="voirProgramme(1)">Programme</button>
<div class="result" id="result1">0%</div>
</div>

<div class="card">
<img src="JD4.jpeg">
<h3>Candidat 2</h3>
<button onclick="voter(2)">Voter</button>
<button class="programme" onclick="voirProgramme(2)">Programme</button>
<div class="result" id="result2">0%</div>
</div>

<div class="card">
<img src="JD5.jpeg">
<h3>Candidat 3</h3>
<button onclick="voter(3)">Voter</button>
<button class="programme" onclick="voirProgramme(3)">Programme</button>
<div class="result" id="result3">0%</div>
</div>

</div>

</div>

<!-- MODAL PROGRAMME -->
<div class="modal" id="modal">
<div class="modal-content">
<span class="close" onclick="fermerModal()">X</span>
<h2 id="titreProgramme"></h2>
<p id="contenuProgramme"></p>
</div>
</div>

<script>

// ================= CONFIGURATION =================
let electionPour = "BTS2"; // "BTS2" ou "TOUS"
const dureeElection = 24 * 60 * 60 * 1000;

// ================= DONNÉES =================

const eleves = [
    {niveau:"BTS2", matricule:"16396197M",password:"7777"},
    {niveau:"BTS2", matricule:"16396198M",password:7776},
    {niveau:"BTS1", matricule:"9999"},
    {niveau:"6e", matricule:"8888"}
];

const programmes = {
1: "• Organiser des cours de soutien\n• Améliorer la discipline\n• Créer un club informatique",
2: "• Défendre les droits des étudiants\n• Organiser des sorties pédagogiques\n• Installer WiFi dans l'école",
3: "• Améliorer la propreté\n• Créer des tournois sportifs\n• Moderniser la bibliothèque"
};

let autorise=false;
let votants=[];
let votes=[0,0,0];

let debut=Date.now();
let fin=debut+dureeElection;

// ================= TIMER =================

function updateTimer(){
    let reste=fin-Date.now();

    if(reste<=0){
        document.getElementById("timer").innerText="Élection terminée";
        document.querySelectorAll("button").forEach(b=>b.disabled=true);
        return;
    }

    let h=Math.floor(reste/(1000*60*60));
    let m=Math.floor((reste%(1000*60*60))/(1000*60));
    let s=Math.floor((reste%(1000*60))/1000);

    document.getElementById("timer").innerText=
    "Temps restant : "+h+"h "+m+"m "+s+"s";

    setTimeout(updateTimer,1000);
}

updateTimer();

// ================= VÉRIFICATION =================

function verifier(){

    let niveau=document.getElementById("niveau").value;
    let matricule=document.getElementById("matricule").value;

    let eleve=eleves.find(e=>e.niveau===niveau && e.matricule===matricule);

    if(!eleve){
        document.getElementById("message").innerText="Informations incorrectes";
        autorise=false;
        return;
    }

    if(votants.includes(matricule)){
        document.getElementById("message").innerText="Vous avez déjà voté";
        autorise=false;
        return;
    }

    if(electionPour!=="TOUS" && niveau!==electionPour){
        document.getElementById("message").innerText=
        "Élection réservée aux "+electionPour;
        autorise=false;
        return;
    }

    document.getElementById("message").innerText="Vous pouvez voter";
    autorise=true;
}

// ================= VOTE =================

function voter(num){

    if(!autorise){
        alert("Vérifiez d'abord !");
        return;
    }

    let matricule=document.getElementById("matricule").value;

    votes[num-1]++;
    votants.push(matricule);
    autorise=false;

    calculer();
}

function calculer(){
    let total=votes.reduce((a,b)=>a+b,0);

    for(let i=0;i<3;i++){
        let p=total===0?0:Math.round((votes[i]/total)*100);
        document.getElementById("result"+(i+1)).innerText=p+"%";
    }
}

// ================= PROGRAMME =================

function voirProgramme(num){

    document.getElementById("titreProgramme").innerText=
    "Programme du Candidat "+num;

    document.getElementById("contenuProgramme").innerText=
    programmes[num];

    document.getElementById("modal").style.display="flex";
}

function fermerModal(){
    document.getElementById("modal").style.display="none";
}

</script>

</body>

</html>


